<div class="scheduler-customize-container">
    <div class="scheduler-centered-content">
        <div class="avaiable-container" pq-drop-on-me on-drop="handledrop(event, null, data)">
            Available services
            <div ng-repeat="status in statuses" class="status" pq-drag-me="statusid" id="status_{{stagestatus.id}}" statusid="{{status.id}}">
                {{status.name}}
            </div>
        </div>

        <div>
            <div class="centered">
                <span>
                    Stages
                </span>
                <span>
                    <input type="submit" class="flatbutton" value="+" title="Add Column" ng-click="$ctrl.addStage($event)" />
                </span>
            </div>
            <div class="stages-container">

                <div ng-repeat="stageobj in stages" class="stage"  pq-drop-on-me ="{{stageobj.isServiceType}}" on-drop="handledrop(event, stageobj, data)"
                     id="stage_{{stageobj.id}}">
                    <div class="stageheader">
                        <span>
                            <input ng-model="stageobj.name" class="stageheadername" />
                        </span>
                        <span ng-if="stageobj.isServiceType">
                            <input type="submit" class="flatbutton" value="-" title="Remove Column" ng-click="$ctrl.removeStage($event, stageobj)" />
                        </span>
                    </div>

                    <div ng-repeat="stagestatus in stageobj.statuses" class="status" pq-drag-me="statusid" id="status_{{stagestatus.id}}" statusid="{{stagestatus.id}}">
                        {{stagestatus.name}}
                    </div>
                </div>
            </div>
        </div>

        <div class="pq-modal-footer">
            <button type="button" ng-click="$ctrl.closeModal(false)" class="btn btn-default" focus-element="autofocus" data-dismiss="pq-modal">Close</button>
            <button type="button" ng-click="$ctrl.closeModal(true)" class="btn btn-primary">Save changes</button>
        </div>
    </div>

</div>
<pq-scheduler-edit-column on-add-stage="$ctrl.onAddStage(stagename)"></pq-scheduler-edit-column>